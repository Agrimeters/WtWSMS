namespace = imperial_legacy

#Give nickname "Augustus" to Western Roman Emperors.
character_event = {
	id = imperial_legacy.1
	hide_window = yes
	
	only_independent = yes
	only_rulers = yes
	
	trigger = {
		AND = {
			has_landed_title = e_wre
			has_romance_culture_trigger = yes
			has_nickname = no
		}
	}
		
	mean_time_to_happen = {
		days = 1
	}
	
	immediate = {
	give_nickname = nick_caesar_augustus
	}
		
	option = {
	name = OK
	}
}

#Remove nickname "Augustus" from deposed Western Roman Emperors.
character_event = {
	id = imperial_legacy.2
	hide_window = yes
	
	trigger = {
	    AND = {
			has_nickname = nick_caesar_augustus
			NOT = {
				has_landed_title = e_wre
			}
		}	
	}
		
    mean_time_to_happen = {
	    days = 1
	}
	
	immediate = {
		remove_nickname = nick_caesar_augustus
	}
		
	option = {
	name = OK
	}
}

# Roman agnomen for military achievements (vanquished opponent culture)
# Fired via on_major_battle_won_leader
# ROOT is winning army leader
# FROM is opponent army leader
character_event = {
	id = imperial_legacy.3
	desc = imperial_legacy.3.desc
	picture = GFX_evt_roman_emperor_salute
	
	is_triggered_only = yes
	
	only_rulers = yes
	
	trigger = {
		has_nickname = no
		has_romance_culture_trigger = yes
		any_war = { war_score = 50 } # Winning the war
		
		FROM = {
			OR = {
				culture = vandalic
				culture = gothic
				culture = sarmatian
				culture = parthian
				culture = isaurian
				culture = alamannian
				culture = old_frankish
				culture = persian
				culture = gallic
				culture = armenian
				culture = alan
				culture = macedonian
				culture = thracian
				culture = pontic
			}
		}
	}
	
	option = {
		name = imperial_legacy.3.a

		# Culture of vanquished opponent
		FROM = {
			trigger_switch = {
				on_trigger = culture
				vandalic 		= { ROOT = { give_nickname = nick_vandalicus } }
				gothic 			= { ROOT = { give_nickname = nick_gothicus } }
				sarmatian 		= { ROOT = { give_nickname = nick_sarmaticus } }
				parthian 		= { ROOT = { give_nickname = nick_parthicus } }
				isaurian 		= { ROOT = { give_nickname = nick_isauricus } }
				alamannian		= { ROOT = { give_nickname = nick_alamannicus } }
				antae			= { ROOT = { give_nickname = nick_anticus } }
				old_frankish	= { ROOT = { give_nickname = nick_francicus } }
				briton			= { ROOT = { give_nickname = nick_britannicus } }
				persian			= { ROOT = { give_nickname = nick_persicus } }
				gallic			= { ROOT = { give_nickname = nick_gallicus } }
				dacian			= { ROOT = { give_nickname = nick_dacicus } }
				armenian		= { ROOT = { give_nickname = nick_armeniacus } }
				alan			= { ROOT = { give_nickname = nick_alanicus } }
				macedonian		= { ROOT = { give_nickname = nick_macedonicus } }
				thracian		= { ROOT = { give_nickname = nick_thracus } }
				pontic 			= { ROOT = { give_nickname = nick_ponticus } } 
			}
		}
	}
}

# Roman agnomen for military achievements (region of major battle)
# on_major_battle_won_leader
# ROOT is winning army leader
# FROM is opponent army leader
character_event = {
	id = imperial_legacy.4
	desc = imperial_legacy.4.desc
	picture = GFX_evt_roman_emperor_salute
	
	is_triggered_only = yes
	
	only_rulers = yes
	
	trigger = {
		has_nickname = no
		has_romance_culture_trigger = yes
		any_war = { war_score = 50 } # Winning the war
		
		# Covered by imperial_legacy.3
		FROM = {
			NOR = {
				culture = vandalic
				culture = gothic
				culture = sarmatian
				culture = parthian
				culture = isaurian
				culture = alamannian
				culture = old_frankish
				culture = persian
				culture = gallic
				culture = armenian
				culture = alan
				culture = macedonian
				culture = thracian
				culture = pontic
			}
		}

		location = {
			OR = {
				region = custom_diocese_aegyptus
				region = custom_diocese_africa
				region = custom_diocese_armenia
				region = custom_diocese_asiana
				region = custom_diocese_hispaniae
				region = custom_diocese_britannia
				region = custom_diocese_italia_annonaria
				region = custom_diocese_italia_suburbicaria
				region = custom_diocese_gallia
				region = custom_diocese_sevenprovinces
				region = custom_diocese_oriens
				region = custom_diocese_thrace
				region = custom_diocese_pontica
			}
		}
	}
	
	option = {
		name = imperial_legacy.4.a

		# Default to the region of major battle
		location = {
			if = {
				limit = { region = custom_diocese_aegyptus }
				ROOT = { give_nickname = nick_aegyptus }
			}
			if = {
				limit = { region = custom_diocese_africa  }
				ROOT = { give_nickname = nick_africanus }
			}
			if = {
				limit = { region = custom_diocese_armenia }
				ROOT = { give_nickname = nick_armeniacus }
			}
			if = {
				limit = { region = custom_diocese_asiana }
				ROOT = { give_nickname = nick_asiaticus }
			}
			if = {
				limit = { region = custom_diocese_hispaniae }
				ROOT = { give_nickname = nick_hispanicus }
			}
			if = {
				limit = { region = custom_diocese_britannia  }
				ROOT = { give_nickname = nick_britannicus }
			}
			if = {
				limit = { 
					OR = {
						region = custom_diocese_italia_annonaria
						region = custom_diocese_italia_suburbicaria
					}
				}
				ROOT = { give_nickname = nick_italicus }
			}
			if = {
				limit = { 
					OR = {
						region = custom_diocese_gallia
						region = custom_diocese_sevenprovinces
					}
				 }
				ROOT = { give_nickname = nick_gallicus }
			}
			if = {
				limit = { region = custom_diocese_oriens }
				ROOT = { give_nickname = nick_arabicus }
			}
			if = {
				limit = { region = custom_diocese_thrace }
				ROOT = { give_nickname = nick_thracus }
			}
			if = {
				limit = { region = custom_diocese_pontica  }
				ROOT = { give_nickname = nick_ponticus }
			}
		}
	}
}

####  Realm decisions

#  Restoration of the Roman Empire
narrative_event = {
	id = imperial_legacy.10
	title = imperial_legacy.10.name
	desc = imperial_legacy.10.desc
	picture = GFX_evt_fall_of_rome
	border = GFX_event_narrative_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = imperial_legacy.10.a
		
		prestige = 2000 
		custom_tooltip = { 
			text = imperial_legacy.10.a.tooltip
		}
	}
}

#  Restoration of the Western Roman Empire
narrative_event = {
	id = imperial_legacy.11
	title = imperial_legacy.11.name
	desc = imperial_legacy.11.desc
	picture = GFX_evt_fall_of_rome
	border = GFX_event_narrative_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = imperial_legacy.11.a
		
		e_wre = {
			grant_title = ROOT
			hidden_tooltip = { make_primary_title = yes }
		}
		prestige = 1000
		
		e_byzantium = {
			holder_scope = {
				narrative_event = { id = imperial_legacy.13 }		
			}
		}
		
		if = {
			limit = {
				NOT = { has_global_flag = great_schism }
				ROOT = { religion = nicene }
			}
			d_papal_state = {
				holder_scope = {
					narrative_event = { id = imperial_legacy.16 }		
				}
			}
		}
		
		if = {
			limit = {
				has_global_flag = great_schism 
				ROOT = { religion = catholic }
			}
			ROOT = { narrative_event = { id = imperial_legacy.19 } }
		}
					
		custom_tooltip = { 
			text = imperial_legacy.11.a.tooltip
		}
	}
}

#  ERE answer to restoration of WRE
narrative_event = {
	id = imperial_legacy.13
	title = imperial_legacy.13.name
	desc = imperial_legacy.13.desc
	picture = GFX_evt_fall_of_rome
	border = GFX_event_narrative_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = imperial_legacy.13.a # Recognise the new ruler
		ai_chance = {
			factor = 10
			modifier = {
				factor = -10
				trait = ambitious
			}
			modifier = {
				factor = -10
				opinion_diff = { 
					first = FROM
					second = ROOT 
					value = 100  
				}	
			}
		}
		hidden_tooltip = {  
			ROOT = {
				if = {
					limit = {
						has_weak_claim  = e_roman_empire
					}
					# Remove any claim gained by "Sole Roman Empire" decision
					remove_claim = e_roman_empire
				}
			}
		}
		set_global_flag = ere_recognised_wre
		custom_tooltip = { 
			text = imperial_legacy.13.a.tooltip
		}
		e_wre = {
			holder_scope = {
				narrative_event = { id = imperial_legacy.14 }		
			}
		}
	}
	
	option = {
		name = imperial_legacy.13.b # Refuse to recognise the new ruler
		ai_chance = {
			factor = 0
			modifier = {
				factor = 10
				has_weak_claim  = e_roman_empire
				trait = ambitious
			}
		}
		modifier = {
				factor = 10
				opinion_diff = { 
					first = FROM
					second = ROOT 
					value = 100  
				}
				has_weak_claim  = e_roman_empire
		}
		set_global_flag = ere_not_recognised_wre 
		custom_tooltip = { 
			text = imperial_legacy.13.b.tooltip
		}
		e_wre = {
			holder_scope = {
				narrative_event = { id = imperial_legacy.15 }		
			}
		}
	}
}

#  ERE recognises WRE
narrative_event = {
	id = imperial_legacy.14
	title = imperial_legacy.14.name
	desc = imperial_legacy.14.desc
	picture = GFX_evt_fall_of_rome
	border = GFX_event_narrative_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = imperial_legacy.14.a
		
		prestige = 100
	}
}

#  ERE does not recognise WRE
narrative_event = {
	id = imperial_legacy.15
	title = imperial_legacy.15.name
	desc = imperial_legacy.15.desc
	picture = GFX_evt_fall_of_rome
	border = GFX_event_narrative_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = imperial_legacy.15.a
		
		prestige = -100
	}
}

# Pope (patriarch) answer to restoration of WRE
narrative_event = {
	id = imperial_legacy.16
	title = imperial_legacy.16.name
	desc = imperial_legacy.16.desc
	picture = GFX_evt_fall_of_rome
	border = GFX_event_narrative_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = OK # Recognise the new ruler (Pope not playable, so no text)
		
		ai_chance = {
			factor = 10
			modifier = {
				factor = -10
				opinion_diff = { 
					first = FROM
					second = ROOT 
					value = 100  
				}	
			}
		}
		if = {
			limit = {
				has_global_flag = great_schism
			}
			hidden_tooltip = {
				any_playable_ruler = {
					narrative_event = { id = HRE.4 } # Fires schism
				} 
			}
		
		}
		e_wre = {
			holder_scope = {
				narrative_event = { id = imperial_legacy.17 }		
			}
		}

	}
	option = {
		name = OK # Refuse to recognise the new ruler (Pope not playable, so no text)
		
		ai_chance = {
			factor = 0
			modifier = {
				factor = 10
				opinion_diff = { 
					first = FROM
					second = ROOT 
					value = 100  
				}	
			}
		}
		
		e_wre = {
			holder_scope = {
				narrative_event = { id = imperial_legacy.18 }		
			}
		}
	}

}

#  Pope (patriarch) recognises WRE
narrative_event = {
	id = imperial_legacy.17
	title = imperial_legacy.17.name
	desc = imperial_legacy.17.desc
	picture = GFX_evt_fall_of_rome
	border = GFX_event_narrative_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = imperial_legacy.17.a
		
		piety = 100
	}
}

#  Pope (patriarch) does not recognise WRE
narrative_event = {
	id = imperial_legacy.18
	title = imperial_legacy.18.name
	desc = imperial_legacy.18.desc
	picture = GFX_evt_fall_of_rome
	border = GFX_event_narrative_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = imperial_legacy.18.a
		
		piety = -100
	}
}

#  WRE ruler chooses how to act with Pope (head) after restoration
narrative_event = {
	id = imperial_legacy.19
	title = imperial_legacy.19.name
	desc = imperial_legacy.19.desc
	picture = GFX_evt_fall_of_rome
	border = GFX_event_narrative_frame_diplomacy
	
	is_triggered_only = yes
	
	option = { 
		name = imperial_legacy.19.a # Give Rome to Pope (he will vassalise and recognise)
		
		k_papal_state = {
			holder_scope = {
				narrative_event = { id = imperial_legacy.20 }
				if = {
					limit = {
						NOT = { has_landed_title = b_roma }
					}
					ROOT = { 
						b_roma = {
							grant_title = PREV
						}
					}
				}
			}
		}
	}
	
	option = {
		name = imperial_legacy.19.b # Do not give Roma (he will get angry and excommunicate)
		
		k_papal_state = {
			holder_scope = {
				narrative_event = { id = imperial_legacy.23 }
			}
		}
	}

}

# Pope (head) gets Roma from WRE
narrative_event = {
	id = imperial_legacy.20
	title = imperial_legacy.20.name
	desc = imperial_legacy.20.desc
	picture = GFX_evt_fall_of_rome
	border = GFX_event_narrative_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = OK # Recognise the new ruler (Pope not playable, so no text)
		
		e_wre = {
			holder_scope = {
				narrative_event = { id = imperial_legacy.21 }		
			}
		}

	}
}

# Pope (head) does not get Roma from WRE
narrative_event = {
	id = imperial_legacy.23
	title = imperial_legacy.23.name
	desc = imperial_legacy.23.desc
	picture = GFX_evt_fall_of_rome
	border = GFX_event_narrative_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = OK #  # Refuse to recognise the new ruler (Pope not playable, so no text)
		
		e_wre = {
			holder_scope = {
				narrative_event = { id = imperial_legacy.22 }		
			}
		}

	}
}

#  Pope (head) recognises WRE
narrative_event = {
	id = imperial_legacy.21
	title = imperial_legacy.21.name
	desc = imperial_legacy.21.desc
	picture = GFX_evt_fall_of_rome
	border = GFX_event_narrative_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = imperial_legacy.21.a
		
		piety = 100
	}
}

#  Pope (head) does not recognise WRE
narrative_event = {
	id = imperial_legacy.22
	title = imperial_legacy.22.name
	desc = imperial_legacy.23.desc
	picture = GFX_evt_fall_of_rome
	border = GFX_event_narrative_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = imperial_legacy.22.a
		
		piety = -100
	}
}

#  Restoration of the Eastern Roman Empire
narrative_event = {
	id = imperial_legacy.12
	title = imperial_legacy.12.name
	desc = imperial_legacy.12.desc
	picture = GFX_evt_fall_of_rome
	border = GFX_event_narrative_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = imperial_legacy.12.a
		
		e_byzantium = {
			grant_title = ROOT
			hidden_tooltip = { make_primary_title = yes }
		}
		prestige = 1000
		
		e_wre = {
			holder_scope = {
				if = {
					limit = {
						has_weak_claim  = e_roman_empire
					}
					# Remove any claim gained by "Sole Roman Empire" decision
					remove_claim = e_roman_empire
				}
			}
		}
		
		custom_tooltip = { 
			text = imperial_legacy.12.a.tooltip
		}
	}
}
